<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Maksym — Register</title>
    <link rel="stylesheet" href="../css/style.css" />
</head>
<body class="page-register">
<header class="header">
    <div class="container">
        <nav class="nav site-nav" aria-label="Main navigation">
            <a href="../index.html">Home</a>
            <a href="./about.html">About</a>
            <a href="./articles.html">Articles</a>
            <a href="./article.html">Article</a>
            <a href="./gallery.html">Gallery</a>
            <a href="./catalog.html">Catalog</a>
            <a href="./anchors.html">Anchors</a>
            <a href="./contacts.html">Contacts</a>
            <a href="./register.html" aria-current="page">Register</a>
        </nav>
    </div>
</header>

<div class="reg-frame" aria-hidden="true"></div>
<div class="reg-scan" aria-hidden="true"></div>
<canvas id="regWaves" class="reg-swirl" aria-hidden="true"></canvas>

<svg height="0" xmlns="http://www.w3.org/2000/svg" style="position:absolute">
    <symbol id="ico-user" viewBox="0 0 24 24">
        <path fill="currentColor" d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"/>
    </symbol>
    <symbol id="ico-mail" viewBox="0 0 24 24">
        <path fill="currentColor" d="M20 4H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5L4 8V6l8 5 8-5Z"/>
    </symbol>
    <symbol id="ico-lock" viewBox="0 0 24 24">
        <path fill="currentColor" d="M17 8h-1V6a4 4 0 1 0-8 0v2H7a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2ZM9 6a3 3 0 1 1 6 0v2H9Zm3 11a1.5 1.5 0 0 1-1.5-1.5A1.49 1.49 0 0 1 12 14a1.49 1.49 0 0 1 1.5 1.5A1.5 1.5 0 0 1 12 17Z"/>
    </symbol>
</svg>

<main class="container">
    <section class="signin-card" aria-labelledby="auth-title">
        <div class="tabbar" role="tablist" aria-label="Auth tabs">
            <button class="tab is-active" role="tab" aria-selected="true" aria-controls="pane-login" id="tab-login">Login</button>
            <button class="tab" role="tab" aria-selected="false" aria-controls="pane-register" id="tab-register">Register</button>
            <span class="tab-underline" aria-hidden="true"></span>
        </div>

        <div class="panes">
            <!-- Login -->
            <form id="pane-login" class="pane" role="tabpanel" aria-labelledby="tab-login" novalidate>
                <div class="field">
                    <span class="ico" aria-hidden="true"><svg><use href="#ico-user"/></svg></span>
                    <input type="text" name="name" placeholder="My name is" autocomplete="username" required>
                </div>
                <div class="field">
                    <span class="ico" aria-hidden="true"><svg><use href="#ico-lock"/></svg></span>
                    <input type="password" name="password" placeholder="Password" autocomplete="current-password" minlength="6" required>
                </div>

                <button class="btn btn-gold" type="submit">Sign in</button>

                <div class="meta">
                    <label class="switch">
                        <input type="checkbox" />
                        <span class="switch-ui" aria-hidden="true"></span>
                        <span class="switch-label">Remember me</span>
                    </label>
                    <a class="help-link" href="#">Lost your password?</a>
                </div>
            </form>

            <!-- Register -->
            <form id="pane-register" class="pane" role="tabpanel" aria-labelledby="tab-register" hidden novalidate>
                <div class="field">
                    <span class="ico" aria-hidden="true"><svg><use href="#ico-user"/></svg></span>
                    <input type="text" name="fullname" placeholder="Full name" data-autocap required>
                </div>
                <div class="field">
                    <span class="ico" aria-hidden="true"><svg><use href="#ico-mail"/></svg></span>
                    <input type="email" name="email" placeholder="Email" autocomplete="email" required>
                </div>
                <div class="field">
                    <span class="ico" aria-hidden="true"><svg><use href="#ico-lock"/></svg></span>
                    <input type="password" name="password" placeholder="Password" autocomplete="new-password" minlength="6" required>
                </div>
                <div class="field">
                    <span class="ico" aria-hidden="true"><svg><use href="#ico-lock"/></svg></span>
                    <input type="password" name="password2" placeholder="Confirm password" minlength="6" required>
                </div>

                <button class="btn btn-gold" type="submit">Create account</button>
            </form>
        </div>
    </section>
</main>

<!-- ASCII фон -->
<script>
    (() => {
        if (matchMedia('(prefers-reduced-motion: reduce)').matches) return;

        const cvs = document.getElementById('regWaves');
        const ctx = cvs.getContext('2d');
        let w, h, dpr = Math.max(1, window.devicePixelRatio || 1);

        function fit(){
            w = cvs.width  = Math.floor(innerWidth * dpr);
            h = cvs.height = Math.floor(innerHeight * dpr);
            cvs.style.width  = innerWidth + 'px';
            cvs.style.height = innerHeight + 'px';
            ctx.setTransform(dpr,0,0,dpr,0,0);
            setup();
            locateCenter();
        }
        addEventListener('resize', fit, {passive:true});

        let cx = innerWidth/2, cy = innerHeight/2;
        function locateCenter(){
            const card = document.querySelector('.signin-card');
            if(!card){ cx = innerWidth/2; cy = innerHeight/2; return; }
            const r = card.getBoundingClientRect();
            cx = r.left + r.width/2;
            cy = r.top  + r.height/2 + 6;
        }
        new ResizeObserver(locateCenter).observe(document.body);
        addEventListener('scroll', locateCenter, {passive:true});

        const CHARS = '._-:;=+*#%0123456789qwertyuiop[]kljhgfdsazxcvbnm<>?!@#$%^&)(';
        const CELL_W = 26, CELL_H = 28;
        let ROWS = 0, COLS = 0, grid = [];

        function setup(){
            ROWS = Math.ceil(h / CELL_H) + 2;
            COLS = Math.ceil(w / CELL_W) + 2;
            grid = new Array(ROWS);
            for (let i=0;i<ROWS;i++){
                grid[i] = new Array(COLS);
                for (let j=0;j<COLS;j++){
                    grid[i][j] = {
                        s1: Math.random()*Math.PI*2,
                        s2: Math.random()*Math.PI*2,
                        v:  (Math.random()-0.5)*3.9,   // скорость
                        c:  rndChar(),
                        tNext: 1 + Math.random()*3
                    };
                }
            }
        }
        function rndChar(){ return CHARS[(Math.random()*CHARS.length)|0]; }

        let last = performance.now()/1000;
        function frame(tms){
            const t = tms/1000;
            const dt = Math.min(0.05, t - last); last = t;

            const g = ctx.createLinearGradient(0,0,0,h);
            g.addColorStop(0,'#0a1426'); g.addColorStop(1,'#0e1b33');
            ctx.fillStyle = g; ctx.fillRect(0,0,w,h);

            ctx.save();
            ctx.transform(1,0,0.10,1,0,0);
            ctx.font = '13px ui-monospace, SFMono-Regular, Menlo, Consolas, monospace';
            ctx.textAlign = 'left'; ctx.textBaseline = 'middle';

            for (let i=0;i<ROWS;i++){
                const yBase = i * CELL_H;
                const yRatio = i / ROWS;
                const baseFill = `rgba(170,205,255,${0.45 - yRatio*0.20})`;
                ctx.fillStyle = baseFill;

                for (let j=0;j<COLS;j++){
                    const cell = grid[i][j];
                    const xBase = j * CELL_W + cell.v * t;
                    const dx = Math.sin(t*0.12 + cell.s1 + i*0.17) * 300;
                    const dy = Math.cos(t*0.10 + cell.s2 + j*0.13) * 200;

                    const x = xBase + dx;
                    const y = yBase + dy;

                    if (Math.random() < 0.0015) ctx.fillStyle = 'rgba(190,225,255,.85)';
                    ctx.fillText(cell.c, x, y);
                    if (ctx.fillStyle !== baseFill) ctx.fillStyle = baseFill;

                    cell.tNext -= dt;
                    if (cell.tNext <= 0){
                        cell.c = rndChar();
                        cell.tNext = 1 + Math.random()*3;
                    }
                }
            }
            ctx.restore();

            ctx.save();
            ctx.globalCompositeOperation = 'lighter';
            const rg = ctx.createRadialGradient(cx, cy, 0, cx, cy, Math.max(w,h)*0.45);
            rg.addColorStop(0, 'rgba(170,210,255,.06)');
            rg.addColorStop(1, 'rgba(0,0,0,0)');
            ctx.fillStyle = rg; ctx.fillRect(0,0,w,h);
            ctx.restore();

            requestAnimationFrame(frame);
        }

        fit();
        frame(performance.now());
    })();
</script>

<script>
    (() => {
        const tabs = Array.from(document.querySelectorAll('.page-register .tab'));
        const underline = document.querySelector('.page-register .tab-underline');
        const panes = {
            'tab-login':    document.getElementById('pane-login'),
            'tab-register': document.getElementById('pane-register')
        };

        function activate(tabId, focus = false) {
            tabs.forEach(t => {
                const active = t.id === tabId;
                t.classList.toggle('is-active', active);
                t.setAttribute('aria-selected', String(active));
                panes[t.id].hidden = !active;
                panes[t.id].setAttribute('tabindex', active ? '0' : '-1');
            });

            const el = document.getElementById(tabId);
            const r = el.getBoundingClientRect();
            const wrap = el.parentElement.getBoundingClientRect();
            underline.style.width = r.width + 'px';
            underline.style.transform = `translateX(${r.left - wrap.left}px)`;
            if (focus) el.focus();
        }

        tabs.forEach(t => t.addEventListener('click', () => activate(t.id, true)));

        tabs.forEach(t => t.addEventListener('keydown', e => {
            const i = tabs.indexOf(t);
            let j = i;
            if (e.key === 'ArrowRight') { j = (i + 1) % tabs.length; e.preventDefault(); }
            if (e.key === 'ArrowLeft')  { j = (i - 1 + tabs.length) % tabs.length; e.preventDefault(); }
            if (e.key === 'Home')       { j = 0; e.preventDefault(); }
            if (e.key === 'End')        { j = tabs.length - 1; e.preventDefault(); }
            if (j !== i) activate(tabs[j].id, true);
        }));

        addEventListener('resize', () => {
            const active = tabs.find(t => t.classList.contains('is-active'))?.id || 'tab-login';
            activate(active);
        }, { passive: true });

        window.addEventListener('load', () => activate('tab-login'));

        const nameInput = document.querySelector('[data-autocap]');
        if (nameInput){
            nameInput.addEventListener('input', () => {
                const v = nameInput.value
                    .replace(/\s+/g,' ')
                    .trim()
                    .toLowerCase()
                    .replace(/\b\p{L}/gu, m => m.toUpperCase());
                if (v !== nameInput.value) {
                    const pos = nameInput.selectionStart;
                    nameInput.value = v;
                    nameInput.setSelectionRange(pos,pos);
                }
            });
        }

        document.querySelectorAll('.pane').forEach(f => f.addEventListener('submit', e => e.preventDefault()));
    })();
</script>
</body>
</html>
